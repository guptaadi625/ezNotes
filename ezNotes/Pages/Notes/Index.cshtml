@page
@model ezNotes.Pages.Notes.IndexModel
@{
    ViewData["Title"] = "Notes";
}
<section class="actions" style="margin-bottom:1rem">
    <form method="get" class="actions" asp-page="./Index">
        <input class="input" type="text" name="q" value="@Model.Q" placeholder="Search title or content…" />
        <button class="btn" type="submit">Search</button>
        <a class="btn btn-primary" asp-page="./New">New</a>
    </form>
</section>

<section class="list">
    @foreach (var n in Model.Items)
    {
        <article class="card">
            <div style="display:flex; justify-content:space-between; gap:.75rem; align-items:center;">
                <div style="min-width:0;">
                    <h3><a asp-page="./Edit" asp-route-id="@n.Id">@(!string.IsNullOrWhiteSpace(n.Title) ? n.Title : "(Untitled)")</a></h3>
                    <p class="badge">
                        Updated @n.UpdatedUtc.ToLocalTime().ToString("g")
                        @if (n.IsArchived)
                        {
                            <span>• Archived</span>
                        }
                    </p>
                </div>
                <a class="btn" asp-page="./Edit" asp-route-id="@n.Id">Open</a>
            </div>
        </article>
    }
    @if (!Model.Items.Any())
    {
        <p class="muted">No notes yet. Create your first one!</p>
    }
</section>
